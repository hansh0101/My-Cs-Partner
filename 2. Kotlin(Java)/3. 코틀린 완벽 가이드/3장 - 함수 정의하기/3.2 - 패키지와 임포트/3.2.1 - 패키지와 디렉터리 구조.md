# 3.2.1 - 패키지와 디렉터리 구조

- 자바와 마찬가지로, 코틀린 파일에서도 맨 앞에 패키지 이름을 지정하면 파일에 있는 모든 최상위 선언을 지정한 패키지 내부에 넣을 수 있다. 패키지를 지정하지 않으면 컴파일러는 파일이 디폴트 최상위 패키지에 속한다고 가정한다. 디폴트 최상위 패키지는 이름이 없다.
- 패키지 디렉티브는 package 키워드로 시작하고 점(.)으로 구별된 식별자들로 이뤄진 패키지 전체 이름(qualified name)이 뒤에 온다. 기본적으로 이 전체 이름은 프로젝트의 전체 패키지 계층에서 루트 패키지로부터 지정한 패키지에 도달하기 위한 경로다. 예를 들어 다음 파일은
    
    ```kotlin
    package foo.bar.util
    
    fun readInt(radix: Int = 10) = readLine()!!.toInt(radix)
    ```
    
- util이라는 패키지에 속하고, util은 다시 bar 패키지에 속하며, bar는 다시 foo 패키지에 속하고, foo 패키지는 루트 패키지에 속한다. 다음 파일은 패키지 계층에서 루트 패키지 바로 아래에 있는 numberUtil에 속한다.
    
    ```kotlin
    package numberUtil
    
    fun readDouble() = readLine()!!.toDouble()
    ```
    
- 같은 패키지 디렉티브를 사용하면 여러 파일을 같은 패키지에 넣을 수 있다. 이런 경우 패키지에는 각 파일의 모든 내용이 함께 포함된다.
- 패키지를 이루는 최상위 선언에는 타입, 함수, 프로퍼티가 있다. 최상위 함수 정의에 대해서는 이미 살펴봤고, 타입이나 프로퍼티를 정의하는 방법은 **4장**에서 설명한다. 같은 패키지 안에서는 간단한 이름을 사용해 패키지 내에 있는 다른 정의를 참조할 수 있다.
- 선언이 다른 패키지에 들어있다면, 전체 이름을 사용해 선언을 참조할 수 있다. 전체 이름은 기본적으로 간단한 이름 앞에 그 선언이 포함된 패키지의 전체 이름을 덧붙인 것이다.
- 일반적으로 이런 접근 방법을 사용하면 이름이 너무 길어서 코드를 읽기 어려워지기 때문에 코틀린은 다른 메커니즘을 제공한다. 파일 맨 앞에서 선언의 전체 이름을 import 디렉티브를 사용해 임포트하면 간단한 이름을 사용해 해당 선언에 접근할 수 있다.

> **IDE 팁**  
인텔리제이 플러그인은 임포트와 관련한 지루한 작업을 대신해준다. 특히 다른 패키지에 선언된 이름을 사용하려고 하면 간단한 이름만 타이핑해도 IDE가 자동으로 해당 이름이 들어있는 패키지들을 보여주며 임포트할 이름을 선택하는 팝업을 띄워준다. 또한 사용하지 않은 임포트 문을 강조해주고 `Optimize Imports` 명령을 사용해(Ctrl + Alt + O or Cmd + Option + O 단축키를 사용해도 된다) 사용하지 않은 임포트를 제거하면서 모든 임포트를 정렬해준다.
> 
- 패키지 계층 구조는 소스 파일에 있는 패키지 디렉티브로부터 구성된 별도의 구조라는 점에 유의해야 한다. 소스 파일 트리와 패키지 계층 구조가 일치할 수도 있지만 꼭 그럴 필요는 없다. 예를 들어 소스 파일은 모두 한 디렉터리 아래에 있지만 각각이 서로 다른 패키지에 포함될 수도 있고, 한 패키지에 포함된 소스 파일들이 모두 서로 다른 디렉터리에 들어갈 수도 있다.

> **자바 vs 코틀린**  
반면, 자바에서는 패키지 구조와 컴파일 대상 루트에 있는 소스 트리 디렉터리 구조가 같아야 한다. 둘의 경로가 다르면 컴파일 오류가 발생한다.
> 
- 하지만 프로젝트의 여러 부분을 이동할 때 (쉽게 패키지로부터 파일 위치를 알 수 있어서) 좀 더 편하기 때문에 디렉터리와 패키지 구조를 동일하게 하는 편을 더 권장한다.

> **IDE 팁**  
기본적으로 인텔리제이 플러그인은 패키지와 디렉터리 구조를 일치시키고, 그렇지 않은 경우 경고를 표시해준다. 디렉터리 경로와 일치하지 않는 패키지를 지정하면 패키지 디렉티브가 강조(회색 밑줄)되는데, 강조된 영역에서 Alt + Enter를 누르면 디렉티브를 변경하거나 파일을 임포트 디렉티브와 일치하는 디렉터리로 이동시킬 수 있다.
>